function buildStreamRailSetupObject(){if(resp=smMainResponse,!document.getElementById("sm_sr_player")){var a=document.createElement("div");a.style.width=resp.width.toString()+"px",a.style.height=resp.height.toString()+"px",a.id="sm_sr_player",document.getElementById("sm_player").appendChild(a)}for(var b=[],c=Math.min(resp.tagList.length,resp.waterfallSize),d=1e3*resp.tagTimeout,e=0;e<c;e++)0==resp.tagList[e].tagUrl.indexOf("http")&&(b[e]={url:resp.tagList[e].tagUrl,id:resp.tagList[e].id.toString(),adCancelTimeout:d},smTagsObjects[resp.tagList[e].id]=resp.tagList[e],smTagsObjects[resp.tagList[e].id].starttime=0,smTagsObjects[resp.tagList[e].id].imptime=0,smTagsObjects[resp.tagList[e].id].requests=0,smTagsObjects[resp.tagList[e].id].errors=0,smTagsObjects[resp.tagList[e].id].impressions=0,smTagsObjects[resp.tagList[e].id].completes=0,smTagsObjects[resp.tagList[e].id].verifys=0,smTagsObjects[resp.tagList[e].id].latency=0);printLogs(JSON.stringify(smTagsObjects));var f={};1==resp.post&&(f={position:"post-roll",server:{tags:b}}),smSetupJsonObject.ads.schedule=[{position:"pre-roll",server:{tags:b}},f];var g=3e4;if(resp.mid>0){g=1e3*Math.round(60/resp.mid);var h=0,i=1e3*resp.timeBetweenTags;0==resp.pre&&(h=g),smSetupJsonObject.breakingAds={minTimeBeforeAds:h,enabled:!0,maxAdsPerLoop:resp.mid,hideContentControls:!1}}0==b.length&&(smSetupJsonObject.breakingAds={},smSetupJsonObject.ads={}),0==resp.pre&&0==resp.mid&&0==resp.post&&delete smSetupJsonObject.ads.schedule,0==resp.pre&&0==resp.mid&&1==resp.post&&smSetupJsonObject.ads.schedule.splice(0,1),smSetupJsonObject.minTimeBetweenWaterfalls=g,smSetupJsonObject.minTimeBetweenAds=g,smSetupJsonObject.minTimeBetweenTags=i,smSetupJsonObject.scaleMode="original",smSetupJsonObject.partnerID="bc1a6ff1-c693-4b2b-9b8b-cc9a54c129fd","html"==resp.type.toLowerCase()?smSetupJsonObject.disableFlash=!0:smSetupJsonObject.uflash={enabled:!0},smSetupJsonObject.withCredentials=resp.credential,smSetupJsonObject.mute=!resp.sound,smSetupJsonObject.muted=!resp.sound,smSetupJsonObject.width=resp.width,smSetupJsonObject.height=resp.height,smoperational.width=smSetupJsonObject.width,smoperational.height=smSetupJsonObject.height;var j=resp.video.toLowerCase().indexOf("{html:");j==-1?(smSetupJsonObject.content.url=resp.video,smSetupJsonObject.content.title=resp.title,smSetupJsonObject.content.linkUrl=smoperational.click+resp.landing_page,smSetupJsonObject.content.linkUrl=smSetupJsonObject.content.linkUrl.trim(),printLogs("smSetupJsonObject.content.linkUrl="+smSetupJsonObject.content.linkUrl),smSetupJsonObject.autoplay=resp.autostart):smSetupJsonObject.banner=resp.video,smoperational.loop>0?smSetupJsonObject.loop=!0:smSetupJsonObject.loop=!1,smSetupJsonObject.autoResize=!1,smSetupJsonObject.iframe=!1;var k=!1,l=resp.logo_landing_page,m=resp.logoLink;0==l.indexOf("http")&&(k=!0),0==m.indexOf("http")&&(smSetupJsonObject.watermark={file:m,xpos:0,ypos:0,xrepeat:0,opacity:.7,clickable:k,url:l}),printLogs(JSON.stringify(smTagsObjects)),printLogs(JSON.stringify(smSetupJsonObject)),1==smcounters.hftNumber&&SMreportEvent("CDN_CHECK","")}var smSrApiVersion="5.0.2.0",smSetupJsonObject={content:{},ads:{schedule:[]}};buildStreamRailSetupObject();var cb=(new Date).getTime(),url="https://sdk.streamrail.com/player/sr.ads.js?cb="+cb;smCallURL(url),window.srAsyncInit=function(){function a(a,c,d){var e=a;b[a]&&(e=b[a]),SMreportEvent(e,d,c)}try{smPlayer&&smPlayer.dispose(),smPlayer=SR("sm_sr_player",smSetupJsonObject)}catch(a){SMreportEvent("SETUP_ERROR","!!! error setup SR player err="+a)}if(smPlayer){1==smcounters.hftNumber?SMreportEvent("LOAD",""):SMreportEvent("HFT","");var b={error:"SETUP_ERROR",playerError:"PLAYER_ERROR",AdRequest:"AD_REQUEST",AdError:"AD_ERROR",AdImpression:"IMPRESSION",AdVideoMidpoint:"AD_VERIFY",AdVideoComplete:"COMPLETE",AdClickThru:"AD_CLICK"},c=smPlayer;["error","playerError","contentEnd"].map(function(a){c.on(a,function(b){var c;try{c=JSON.stringify(b.error)}catch(a){c="error:"+a}"contentEnd"==a&&smoperational.loopnumber++})}),["AdLoaded","AdRequest","AdError","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdLoadTimeout","AdVideoComplete","AdPaused","AdVolumeChange","AdClickThru","AdPlaying"].map(function(b){c.on(b,function(c){var d=null,e=null;try{if(c.analytics.adsourceid)if(d=c.analytics.adsourceid,""==smoperational.playerVersion&&c.analytics.version&&(smoperational.playerVersion=c.analytics.version,smoperational.clientVersion=smoperational.clientVersion+"_api_"+smSrApiVersion+"_SR_"+c.analytics.version),"AdImpression"==b)e="adURL="+c.assetURI,smTagsObjects[d].latency=smTagsObjects[d].imptime-smTagsObjects[d].starttime;else if("AdError"==b)try{e=c.error.message}catch(a){isError="No Data "}}catch(a){e="error:"+a}d?a(b,d,e):(e="no tag id:"+b+" "+e,SMreportEvent("LOGIC_ERROR",e))})})}};